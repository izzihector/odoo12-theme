<?xml version="1.0" encoding="utf-8"?>

<odoo>
	<data>
	
		<record id="sh_res_website_language_flag_form_view_inherit" model="ir.ui.view" >
		    <field name="name">res.website.language.flag.form</field>
            <field name="model">res.lang</field>
            <field name="inherit_id" ref="base.res_lang_form"/>
            <field name="arch" type="xml">
                        
                <xpath expr="//field[@name='active']" position="after">
                    <field name="image" widget='image' />
                </xpath>
                
            </field>
		</record>
		
	 	<template id="website.language_selector">		
		</template>

 		<template id="sh_res_website_show_language_flag_template_inherit" inherit_id="portal.frontend_layout" customize_show="True" name="Language Flag">
	        <xpath expr="//ul[@id='top_menu']" position="inside">
	            <li class="divider" groups="base.group_user"/>	       

             	<li t-if="request and (request.is_frontend_multilang and len(languages) &gt;= 1) and website" class="dropdown">				
                	<a href="#" class="dropdown-toggle" data-toggle="dropdown">
                    
                        <t t-foreach="website.language_ids" t-as="lg">
  	                        <t t-if="request.env.lang == lg.code">  	    
  	                        	<div style="width:auto;padding:3px 0;">
         	       					<img t-att-src="website.image_url(lg, 'image')" class="img-responsive" style="float:left;margin-right:10px;" height="20" width="30"  >         	       				   	                             
   	                        		<t t-esc="lg.name.split('/').pop()" style="float:right;padding-left:5px;"></t>
   	                        		</img>
  	                        	</div>                     
   							 </t>                        
  						</t>
 					</a>            	
				   
				    <ul class="dropdown-menu js_language_selector mt16" t-if="(request and request.is_frontend_multilang and len(languages) &gt;= 1) or (website and (editable or translatable))" style="width:75px;float:right;padding:0.5rem 0px 0.5rem 10px;">                        
                        
                        <t t-foreach="website.language_ids" t-as="lg">
                            <t t-if="lang != lg.code">
                            	<li style="width:auto;padding:3px 0;">
					            	<a t-att-href="url_for(request.httprequest.path + '?' + keep_query(), lang_code=lg.code)"
							            t-att-data-default-lang="(editable or translatable) and 'true' if website and lg.code == website.default_lang_id.code else None"
							            t-att-data-lang="lg.code"
							            class="js_change_lang">							             
							            
				          	    	<img t-att-src="website.image_url(lg, 'image')" class="img-responsive"  style="float:left;margin-right:10px;" height="20" width="30" /> 
							        <t t-esc="lg.name.split('/').pop()" style="float:right;padding-left:5px;"/>
							        </a>
					        	</li>
					        </t>
				        </t>
					        					        
 					    <t groups="website.group_website_publisher">
						    <t t-set="url_return" t-value="url_for('', '[lang]') + '?' + keep_query()"/>					           
				            <a t-attf-href="/web#action=base.action_view_base_language_install&amp;website_id=#{website.id if website else ''}&amp;url_return=#{url_return}">
				            	<br/>
				            	<i class="fa fa-plus-circle" style="padding-left:10px;"/> <span style="padding-left:5px;">  Add a language...</span>
				            </a>
					    </t> 

 				    </ul>				    
 				    
 	            </li>
 	            
	   		</xpath>
 		</template>		
	
	</data>
</odoo>
